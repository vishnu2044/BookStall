{% extends 'adminpanel/base.html' %}

{% block title %}
    orders
{% endblock %}

{% block content %} 
<div class="row col-12 ">

    <div class="col-12 grid-margin">

      <div class="card">
        <div class="col-12" >
            <br>
            <div class="add-items d-flex">
              <form class="form-inline" action="{% url 'search_orders' %}" method = "POST">
                {% csrf_token %}
                  <input type="text" class="form-control todo-list-input" placeholder="Search...">
                  <button type='submit' class="btn btn-primary ml-2">Search</button>
              </form>
                <a href="{% url 'add_product' %}" class="btn btn-success ml-2">Add </a>
              </div>
              

        </div>

        <div class="card-body">
          <h4 class="card-title">Books</h4>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th> Number </th>
                  {% comment %} <th> order id </th> {% endcomment %}
                  <th> Product name </th>
                  <th> quantity </th>
                  <th> user </th>
                  <th> Status </th>
                  <th> Payment method </th>
                  <th>  </th>
                  <th>Details</th>

                </tr>
              </thead>
              <tbody>
                {% for order_item in order_items %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    {% comment %} <td>{{ order_item.order.order_id }}</td> {% endcomment %}
                    <td>{{ order_item.product.product_name }}</td>
                    <td>{{ order_item.quantity }}</td>
                    <td>{{ order_item.user.username }}</td>
                    <td>{{ order_item.status }}</td>
                    <td>{{ order_item.order.payment.payment_method }}</td>
                    <td>
                      <div class="modal-body align-content-left">
                        {% comment %} <form required action="{% url 'update_order_status' order_item.id %}"
                            class="mx-1 mx-md-4" method="POST">
                            {% csrf_token %}
                            
                            <!-- CAtegory-->
                            <div class="mb-3">
                                <select class="btn btn-primary dropdown-toggle" aria-label="Default select example" name="status" required>
                                <option class="dropdown-item" value="{{order_item.status}}" selected>{{order_item.status}}</option>
                                {% for status in order_item.ORDER_STATUS %}
                                <option value="{{ status.0 }}" >{{ status.0 }}</option>
                                {% endfor %}
                                </select>
                                <button type="submit" class="btn btn-success">Update</button>
                            </div>


                            <div class="modal-footer">
                                
                            </div>

                        </form> {% endcomment %}
                    </div>
                    </td>
                    <td>
                      <a href="{% url 'order_details' order_item.id %}">
                        <button type="button" class="btn btn-outline-info btn-fw">View details</button>
                      </a>
                    </td>
                </tr>
                {% endfor %}



            </tbody>
            
            
              
              
              
              
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


{% endblock content %}
